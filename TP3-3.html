<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="tailwind.js"></script>    
    <title>TP3 EX3</title>
</head>
<body>
    <div class="w-1/2 h-fit">
        <div class="title w-full h-fit text-center font-bold">To-do List with localstorage</div>
        <div class="input bg-slate-200 flex items-center justify-center h-20 rounded-xl p-4">
            <div class="input-title w-1/4 ml-3 mr-3">
                <div>Key</div>
                <input type="text" id="key" class="h-10 w-full border-black border-2 rounded-xl">
            </div>
            <div class="input-assignee w-1/4 ml-3 mr-3">
                <div>Value</div>
                <input type="text" id="value" class="h-10 w-full border-black border-2 rounded-xl">
            </div>
            <div class="input-deadline w-1/4 ml-3 mr-3">
                <div>Expired</div>
                <input type="date" id="deadline" class="h-10 w-full border-black border-2 rounded-xl">
            </div>
            <div class="input-deadline w-fit ml-3 mr-3">
                <div>-</div>
                <input onclick="Justclick()" type="button" id="add-btn" class="h-10 w-16 bg-blue-700 rounded-xl text-cyan-50" value="Add">
            </div>
            
        </div>

        <div id="listwrapper"></div>    
    </div>

   <!-- <script src="javascriptTP3.js"></script>      --> 
   <script>
    //set cookie
    function setCookie(name, value, days){
        const date = new Date();
        date.setTime(date.getTime()+ days*24*60*60*1000);
        let expires = "expires=" + date.toUTCString();
        document.cookie = `${name}=${value}; ${expires}; path=/`;
    }



    //display all cookies
    function displayCookie(){
        console.log(document.cookie);
    }


    //delete cookie
    function deleteCookie(name){
        setCookie(name,null,null);
    }


    //get array of all cookie 
    //not used
    // function getDataCookie(){
    //     const cDecoded = decodeURIComponent(document.cookie);
    //     const cArray = cDecoded.split("; ");
    //     console.log(cArray);
    //     let arr = []
        
    //     for(let i=0; i<cArray.length; i++){
    //         arr += cArray[i] + "<br>";
    //     }

    //     dis.innerHTML = arr;
    // }




    //get cookie value
    function getCookieValue(name){
        const cDecoded = decodeURIComponent(document.cookie);
        const cArray = cDecoded.split("; ");
        let result1 = null;
        //find cookie value
        cArray.forEach(function(element) {
            if(element.indexOf(name)==0){
                result1 = element.substring(name.length + 1);
            }
        })
        return result1; 
    }


    //display value on webpage
    function displayCookieValueWebpage(name){
        dvalue.innerHTML = getCookieValue(name);
    }

    //get cookie key
    function getCookieKey(name){
        const cDecoded = decodeURIComponent(document.cookie);
        const cArray = cDecoded.split("; ");
        let result = null;
        //find cookie key
        cArray.forEach(function(element) {
            if(element.indexOf(name)==0){
                result = element.substring(0,name.length +0);
            }
        })
        return result; 
    }


    //display key on webpage
    function displayCookieKeyWebpage(key){
        dkey.innerHTML = getCookieKey(key);
    }

    function displayAllOnWebpage(){

    }
    list = [
        `
            <div id="dkey"></div>
            <div id="dvalue"></div>
            <button>Set Expired</button>`
        ]

    //add cookie
    function Justclick(){



        let ele1 = document.getElementById("keyyy");
        let ele11 = ele1.value; 

        let ele2 = document.getElementById("valueee");
        let ele22 = ele2.value; 

        let ele3 = document.getElementById("expireddd");
        let ele33 = ele3.value;

        list.push([ele1.value,ele1.value,])
        
        setCookie(ele11,ele22,ele33);

        displayCookieValueWebpage(ele11);
        displayCookieKeyWebpage(ele11);
        
        console.log("Successfully added");
    }



    // displayCookieValueWebpage("monit");
    // displayCookieKeyWebpage("monit");


    //getDataCookie();
    displayCookie();
    //deleteCookie("username");

    
</script>

</body>
</html>